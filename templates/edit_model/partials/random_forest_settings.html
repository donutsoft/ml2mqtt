<div class="settingsGroup">
    <h3>Classifier Settings</h3>
  
    <div class="formField">
      <label for="classifier">Classifier</label>
      <select id="classifier" name="classifier" disabled class="styledSelect">
        <option value="RandomForest" selected>Random Forest</option>
      </select>
    </div>
  
    <div class="formField" style="flex-direction: row; gap: 1rem;">
      <button type="submit" name="action" value="tune" class="btn small">ðŸ”§ Automatically Tune Model</button>
      <button type="submit" name="action" value="test" class="btn small">ðŸ“Š Test Model & Show Accuracy</button>
    </div>
  
    <div class="formField">
      <label>Number of Trees</label>
      <input type="number" name="nEstimators" value="{{ model.params.n_estimators or 100 }}">
    </div>
  
    <div class="formField">
      <label>Maximum Tree Depth</label>
      <input type="number" name="maxDepth" value="{{ model.params.max_depth or '' }}">
    </div>
  
    <!-- Show Advanced Button -->
    <div class="formField">
      <button type="button" onclick="toggleAdvancedParams()" id="showAdvancedBtn" class="btn small">Show Advanced Settings</button>
    </div>
  
    <!-- Advanced Settings Block -->
    <div id="advancedParams" style="display: none;">
      <div class="formField">
        <label>Minimum Samples to Split</label>
        <input type="number" name="minSamplesSplit" value="{{ model.params.min_samples_split or 2 }}">
      </div>
  
      <div class="formField">
        <label>Minimum Samples per Leaf</label>
        <input type="number" name="minSamplesLeaf" value="{{ model.params.min_samples_leaf or 1 }}">
      </div>
  
      <div class="formField">
        <label>Max Features Per Split</label>
        <select name="maxFeatures" class="styledSelect">
          {% set selected = model.params.max_features or 'sqrt' %}
          <option value="sqrt" {% if selected == 'sqrt' %}selected{% endif %}>Square Root (sqrt)</option>
          <option value="log2" {% if selected == 'log2' %}selected{% endif %}>Log Base 2 (log2)</option>
          <option value="None" {% if selected == 'None' %}selected{% endif %}>All Features</option>
        </select>
      </div>
  
      <div class="formField">
        <label>Class Weight</label>
        <select name="classWeight" class="styledSelect">
          {% set selected = model.params.class_weight or 'None' %}
          <option value="None" {% if selected == 'None' %}selected{% endif %}>None</option>
          <option value="balanced" {% if selected == 'balanced' %}selected{% endif %}>Balanced</option>
          <option value="balanced_subsample" {% if selected == 'balanced_subsample' %}selected{% endif %}>Balanced Subsample</option>
        </select>
      </div>
  
      <div class="formField formFieldRow">
        <div class="labelColumn">
          <label for="bootstrap">Use Bootstrap Samples</label>
        </div>
        <div class="toggleColumn">
          <label class="switch">
            <input type="checkbox" id="bootstrap" name="bootstrap" {% if model.params.bootstrap != False %}checked{% endif %} onchange="toggleOobField()">
            <span class="slider"></span>
          </label>
        </div>
      </div>
  
      <div class="formField formFieldRow" id="oobRow" style="{% if not model.params.bootstrap %}display: none;{% endif %}">
        <div class="labelColumn">
          <label for="oobScore">Use Out-of-Bag Scoring</label>
        </div>
        <div class="toggleColumn">
          <label class="switch">
            <input type="checkbox" id="oobScore" name="oobScore" {% if model.params.oob_score %}checked{% endif %}>
            <span class="slider"></span>
          </label>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    function toggleAdvancedParams() {
      const el = document.getElementById("advancedParams");
      el.style.display = el.style.display === "none" ? "block" : "none";
      const btn = document.getElementById("showAdvancedBtn");
        if (btn) {
            btn.style.display = "none";
        }
    }
  
    function toggleOobField() {
      const bootstrap = document.getElementById("bootstrap").checked;
      document.getElementById("oobRow").style.display = bootstrap ? "flex" : "none";
    }
  </script>